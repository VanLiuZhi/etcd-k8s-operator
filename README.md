# ETCD Kubernetes Operator

[![Go Version](https://img.shields.io/badge/Go-1.22.3-blue.svg)](https://golang.org)
[![Kubernetes](https://img.shields.io/badge/Kubernetes-1.22+-green.svg)](https://kubernetes.io)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE)
[![Build Status](https://img.shields.io/badge/Build-Passing-brightgreen.svg)](https://github.com/your-org/etcd-k8s-operator/actions)

ä¸€ä¸ªä¼ä¸šçº§çš„ etcd Kubernetes Operatorï¼Œç”¨äºåœ¨ Kubernetes é›†ç¾¤ä¸­ç®¡ç† etcd å®ä¾‹ï¼Œæä¾›é«˜å¯ç”¨ã€åŠ¨æ€æ‰©ç¼©å®¹ã€è‡ªåŠ¨æ•…éšœæ¢å¤å’Œæ•°æ®ç»´æŠ¤ç­‰åŠŸèƒ½ã€‚

## ğŸš€ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **é«˜å¯ç”¨éƒ¨ç½²**: æ”¯æŒ 3/5/7 èŠ‚ç‚¹çš„å¥‡æ•°é›†ç¾¤éƒ¨ç½²
- âœ… **åŠ¨æ€æ‰©ç¼©å®¹**: åœ¨çº¿æ·»åŠ /ç§»é™¤ etcd èŠ‚ç‚¹
- âœ… **è‡ªåŠ¨æ•…éšœæ¢å¤**: æ™ºèƒ½æ•…éšœæ£€æµ‹å’Œè‡ªåŠ¨æ¢å¤
- âœ… **æ•°æ®å¤‡ä»½æ¢å¤**: æ”¯æŒå®šæœŸå¤‡ä»½å’Œç‚¹æ—¶é—´æ¢å¤
- âœ… **TLS å®‰å…¨**: è‡ªåŠ¨ TLS è¯ä¹¦ç®¡ç†
- âœ… **ç›‘æ§é›†æˆ**: Prometheus æŒ‡æ ‡å’Œ Grafana ä»ªè¡¨æ¿

### é«˜çº§åŠŸèƒ½
- ğŸ”„ **æ»šåŠ¨æ›´æ–°**: é›¶åœæœºæ—¶é—´çš„ç‰ˆæœ¬å‡çº§
- ğŸ“Š **æ€§èƒ½ç›‘æ§**: å®æ—¶æ€§èƒ½æŒ‡æ ‡å’Œå‘Šè­¦
- ğŸ›¡ï¸ **å®‰å…¨åŠ å›º**: RBAC é›†æˆå’Œç½‘ç»œç­–ç•¥
- ğŸ”§ **è‡ªåŠ¨ç»´æŠ¤**: ç¢ç‰‡æ¸…ç†å’Œæ€§èƒ½ä¼˜åŒ–
- ğŸ“± **å¤šäº‘æ”¯æŒ**: æ”¯æŒå„ç§äº‘å¹³å°å’Œå­˜å‚¨åç«¯

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Kubernetes**: 1.22 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Go**: 1.22.3 (å¼€å‘ç¯å¢ƒ)
- **Docker**: 20.10+ (æ„å»ºé•œåƒ)
- **Kind**: 0.17+ (æµ‹è¯•ç¯å¢ƒ)

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Kubernetes Cluster                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ETCD Operator  â”‚    â”‚        ETCD Cluster             â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”‚Node1â”‚ â”‚Node2â”‚ â”‚Node3â”‚       â”‚ â”‚
â”‚  â”‚  â”‚Controller â”‚  â”‚â—„â”€â”€â–ºâ”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  Webhook  â”‚  â”‚    â”‚  â”‚     Service & Ingress   â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… Operator

```bash
# ä½¿ç”¨ Helm å®‰è£…
helm repo add etcd-operator https://your-org.github.io/etcd-k8s-operator
helm install etcd-operator etcd-operator/etcd-operator

# æˆ–è€…ä½¿ç”¨ kubectl ç›´æ¥å®‰è£…
kubectl apply -f https://github.com/your-org/etcd-k8s-operator/releases/latest/download/install.yaml
```

### 2. åˆ›å»º ETCD é›†ç¾¤

```yaml
apiVersion: etcd.io/v1alpha1
kind: EtcdCluster
metadata:
  name: my-etcd-cluster
  namespace: default
spec:
  size: 3
  version: "3.5.9"
  storage:
    storageClassName: "fast-ssd"
    size: "10Gi"
  security:
    tls:
      enabled: true
  backup:
    enabled: true
    schedule: "0 2 * * *"
    storageType: "s3"
    s3:
      bucket: "my-etcd-backups"
      region: "us-west-2"
```

```bash
kubectl apply -f etcd-cluster.yaml
```

### 3. éªŒè¯é›†ç¾¤çŠ¶æ€

```bash
# æ£€æŸ¥é›†ç¾¤çŠ¶æ€
kubectl get etcdcluster my-etcd-cluster

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
kubectl describe etcdcluster my-etcd-cluster

# æ£€æŸ¥ Pod çŠ¶æ€
kubectl get pods -l app.kubernetes.io/name=etcd,app.kubernetes.io/instance=my-etcd-cluster
```

## ğŸ“š æ–‡æ¡£

- [ğŸ“– ç”¨æˆ·æŒ‡å—](docs/user-guide.md)
- [ğŸ”§ é…ç½®å‚è€ƒ](docs/configuration.md)
- [ğŸ—ï¸ æ¶æ„è®¾è®¡](docs/architecture.md)
- [ğŸ§ª å¼€å‘æŒ‡å—](docs/development.md)
- [â“ æ•…éšœæ’é™¤](docs/troubleshooting.md)
- [ğŸ“Š ç›‘æ§æŒ‡å—](docs/monitoring.md)

## ğŸ› ï¸ å¼€å‘

### ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/etcd-k8s-operator.git
cd etcd-k8s-operator

# å®‰è£…ä¾èµ–
make deps

# è¿è¡Œæµ‹è¯•
make test

# æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶
make build
```

### æœ¬åœ°å¼€å‘

```bash
# åˆ›å»º Kind é›†ç¾¤
make kind-create

# éƒ¨ç½² CRD
make install

# è¿è¡Œ operator (åœ¨é›†ç¾¤å¤–)
make run

# éƒ¨ç½²æµ‹è¯•é›†ç¾¤
kubectl apply -f config/samples/etcd_v1alpha1_etcdcluster.yaml
```

### æµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
make test

# è¿è¡Œé›†æˆæµ‹è¯•
make test-integration

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
make test-e2e

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
make test-coverage
```

## ğŸ“Š é¡¹ç›®çŠ¶æ€

### å½“å‰è¿›åº¦ (ç¬¬ 1 å‘¨)

- [x] **é¡¹ç›®æ¶æ„è®¾è®¡**: å®Œæˆæ•´ä½“æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹
- [ ] **é¡¹ç›®åˆå§‹åŒ–**: ä½¿ç”¨ Kubebuilder åˆå§‹åŒ–é¡¹ç›®ç»“æ„
- [ ] **CRD è®¾è®¡**: è®¾è®¡ EtcdCluster å’Œç›¸å…³ CRD
- [ ] **åŸºç¡€æ§åˆ¶å™¨**: å®ç°æ ¸å¿ƒæ§åˆ¶å™¨æ¡†æ¶

### ä¸‹ä¸€æ­¥è®¡åˆ’

1. **æœ¬å‘¨ç›®æ ‡**: å®Œæˆé¡¹ç›®åˆå§‹åŒ–å’ŒåŸºç¡€ CRD è®¾è®¡
2. **ä¸‹å‘¨ç›®æ ‡**: å®ç°æ ¸å¿ƒæ§åˆ¶å™¨é€»è¾‘å’ŒåŸºæœ¬é›†ç¾¤ç®¡ç†
3. **æœˆåº¦ç›®æ ‡**: å®Œæˆé«˜å¯ç”¨å’Œæ‰©ç¼©å®¹åŠŸèƒ½

### é‡Œç¨‹ç¢‘

- ğŸ¯ **v0.1.0** (ç¬¬ 4 å‘¨): åŸºç¡€é›†ç¾¤ç®¡ç†åŠŸèƒ½
- ğŸ¯ **v0.2.0** (ç¬¬ 8 å‘¨): é«˜å¯ç”¨å’Œæ‰©ç¼©å®¹åŠŸèƒ½
- ğŸ¯ **v0.3.0** (ç¬¬ 12 å‘¨): å¤‡ä»½æ¢å¤å’Œç›‘æ§åŠŸèƒ½
- ğŸ¯ **v1.0.0** (ç¬¬ 16 å‘¨): ç”Ÿäº§å°±ç»ªç‰ˆæœ¬

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£å¦‚ä½•å‚ä¸é¡¹ç›®ã€‚

### è´¡çŒ®æ–¹å¼

- ğŸ› æŠ¥å‘Š Bug
- ğŸ’¡ æå‡ºæ–°åŠŸèƒ½å»ºè®®
- ğŸ“ æ”¹è¿›æ–‡æ¡£
- ğŸ”§ æäº¤ä»£ç è¡¥ä¸
- ğŸ§ª ç¼–å†™æµ‹è¯•ç”¨ä¾‹

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®å’Œç¤¾åŒºçš„æ”¯æŒï¼š

- [Kubebuilder](https://kubebuilder.io/) - Kubernetes Operator å¼€å‘æ¡†æ¶
- [etcd](https://etcd.io/) - åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨
- [Kubernetes](https://kubernetes.io/) - å®¹å™¨ç¼–æ’å¹³å°
- [Go](https://golang.org/) - ç¼–ç¨‹è¯­è¨€

## ğŸ“ è”ç³»æˆ‘ä»¬

- ğŸ“§ é‚®ä»¶: [etcd-operator@your-org.com](mailto:etcd-operator@your-org.com)
- ğŸ’¬ Slack: [#etcd-operator](https://your-org.slack.com/channels/etcd-operator)
- ğŸ› Issues: [GitHub Issues](https://github.com/your-org/etcd-k8s-operator/issues)
- ğŸ“– æ–‡æ¡£: [é¡¹ç›®æ–‡æ¡£](https://your-org.github.io/etcd-k8s-operator)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼
